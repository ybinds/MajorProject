package com.rihs.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.rihs.binding.CasePlanResponse;
import com.rihs.entity.Case;
import com.rihs.entity.Plan;
import com.rihs.repository.CaseRepository;
import com.rihs.repository.PlanRepository;

@Service
public class CaseServiceImpl implements ICaseService {

	@Autowired
	private CaseRepository crepo;
	
	@Autowired
	private PlanRepository prepo;
	
	public CasePlanResponse createCase(Long appId) {
		Case c = new Case();
		c.setAppId(appId);
		Case savedCase = crepo.save(c); // create a fresh case
		CasePlanResponse response = new CasePlanResponse();
		response.setCaseNumber(savedCase.getCaseNumber());
		List<Plan> plans = prepo.findAll();
		response.setPlan(plans);
		return response;
	}

}
